<h1>hello, <%= @student.name %>!</h2>

<h2>Enter your latest completed lesson:</h2>
<%= render('layouts/errors', :object => @completion) %>
<form id="new_completion" action="/completions/<%= @student.id %>" method="post">
  <%= render('./completions/form') %>
  <select form="new_completion" name="completion[lesson_id]">
    <% @student.not_done.each do |lesson| %>
      <option value="<%= lesson.id %>"><%= lesson.name %></option>
    <% end %>
  </select>
  <button>Mark completed</button>
</form>

<h2>Today's potential pairs: <%= @student.pairs.count %></h2>
  <ul>
    <% @student.pairs.each do |student| %>
      <li><a href="/<%= student.name %>"><%= student.name %></a></li>
    <% end %>
  </ul>

<h4>Course Progress: </h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Lesson Name</th>
        <th>Completion Date</th>
      </tr>
    </thead>
    <tbody>
      <% @lessons.each_with_index do |lesson, index| %>
        <tr>
          <td><%= lesson.name %></td>
          <td><%= @lessons_dates[index] %>
            <% if @student.lessons.include?(lesson) %>
              <a href = "/completions/<%= @student.completions.where(lesson_id: lesson.id).first.id %>"
                data-confirm="Are you sure you want to mark this lesson as incomplete?"
                data-method="delete" rel= "nofollow" class= "mark_incomplete">Mark incomplete</a>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>

<p><a href="/">Return to Roster</a></p>

<%= render('layouts/errors', :object => @student) %>

<h3>Edit name</h3>
<form action="/students/<%= @student.id %>" method="post">
  <input name="_method" type="hidden" value="patch">
  <%= render('form') %>
  <button>Update</button>
</form>

<p><a href = "/students/<%= @student.id %>"
      data-confirm="Are you sure you want to delete this student?"
      data-method="delete" rel= "nofollow">Delete Student</a></p>
